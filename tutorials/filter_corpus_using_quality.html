<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<meta property="og:title" content="Filtering corpora using Quality" />
<meta property="og:type" content="website" />
<meta property="og:url" content="tutorials/filter_corpus_using_quality.html" />
<meta property="og:site_name" content="textdescriptives" />
<meta property="og:description" content="In many cases if you want to analyse tweets, train a model on text scraped from the web or similar, it is important to filter out low-quality texts. TextDescriptives implements a series of heuristi..." />
<meta property="og:image:width" content="1146" />
<meta property="og:image:height" content="600" />
<meta property="og:image" content="/_images/social_previews/summary_tutorials_filter_corpus_using_quality_faefa34e.png" />
<meta property="og:image:alt" content="In many cases if you want to analyse tweets, train a model on text scraped from the web or similar, it is important to filter out low-quality texts. TextDesc..." />
<meta name="description" content="In many cases if you want to analyse tweets, train a model on text scraped from the web or similar, it is important to filter out low-quality texts. TextDescriptives implements a series of heuristi..." />
<meta name="twitter:card" content="summary_large_image" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Scikit-learn Integration" href="sklearn_integration.html" /><link rel="prev" title="Introductory Tutorial" href="introductory_tutorial.html" />

    <!-- Generated with Sphinx 5.3.0 and Furo 2022.12.07 -->
        <title>Filtering corpora using Quality - textdescriptives 2.7.3 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=91d0f0d1c444bdcb17a68e833c7a53903343c195" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/autodoc_pydantic.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --color-brand-primary: #ff5454;
  --color-brand-content: #ff7575;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #ff8f8f;
  --color-brand-content: #ff8f8f;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #ff8f8f;
  --color-brand-content: #ff8f8f;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">textdescriptives 2.7.3 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../_static/icon.png" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../_static/icon_dark.png" alt="Dark Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usingthepackage.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usingthepackage.html#using-specific-components">Using Specific Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usingthepackage.html#available-attributes">Available Attributes</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../tutorial.html">Tutorials</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="introductory_tutorial.html">Introductory Tutorial</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Filtering corpora using Quality</a></li>
<li class="toctree-l2"><a class="reference internal" href="sklearn_integration.html">Scikit-learn Integration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../news.html">News and Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Components</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../descriptivestats.html">Descriptive Statistics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../readability.html">Readability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dependencydistance.html">Dependency Distance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../posstats.html">Part-of-Speech Proportions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quality.html">Quality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coherence.html">Coherence</a></li>
<li class="toctree-l1"><a class="reference internal" href="../information_theory.html">Information Theory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extractors.html">Extractor</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/hlasse/TextDescriptives">GitHub Repository</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="filtering-corpora-using-quality">
<h1>Filtering corpora using Quality<a class="headerlink" href="#filtering-corpora-using-quality" title="Permalink to this heading">#</a></h1>
<a target="_blank" href="https://colab.research.google.com/github/HLasse/TextDescriptives/blob/main/docs/tutorials/filter_corpus_using_quality.ipynb">
  <img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab"/>
</a>
<p>In many cases if you want to analyse tweets, train a model on text scraped from the web or similar, it is important to filter out low-quality texts.</p>
<p>TextDescriptives implements a series of heuristic filters for removing low-quality text. This tutorial will take you through how to use these to filter
your text corpora.</p>
<section id="setup">
<h2>Setup<a class="headerlink" href="#setup" title="Permalink to this heading">#</a></h2>
<p>For this we will use datasets available on <a class="reference external" href="https://huggingface.co/datasets">Huggingface Datasets</a>. Thus we will need the <code class="docutils literal notranslate"><span class="pre">datasets</span></code> package. Which you can install by running</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>!pip install datasets
</pre></div>
</div>
<p>Or by installing textdescriptives with the <code class="docutils literal notranslate"><span class="pre">[tutorials]</span></code> option as below</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">textdescriptives</span> <span class="k">as</span> <span class="nn">td</span>
<span class="k">except</span><span class="p">:</span>
    <span class="o">!</span>pip<span class="w"> </span>install<span class="w"> </span><span class="s2">&quot;textdescriptives[tutorials]&quot;</span>
    <span class="kn">import</span> <span class="nn">textdescriptives</span> <span class="k">as</span> <span class="nn">td</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="filtering-web-content">
<h2>Filtering Web content<a class="headerlink" href="#filtering-web-content" title="Permalink to this heading">#</a></h2>
<section id="the-data">
<h3>The Data<a class="headerlink" href="#the-data" title="Permalink to this heading">#</a></h3>
<p>For our first example we will filter web content. For this we will use the <a class="reference external" href="https://huggingface.co/datasets/mc4">mC4 dataset</a>. It would take ages to download the whole data so instead we will stream down 1000 samples from the dataset.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datasets</span> <span class="kn">import</span> <span class="n">load_dataset</span>

<span class="c1"># stream in the dataset</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;mc4&quot;</span><span class="p">,</span> <span class="s2">&quot;en&quot;</span><span class="p">,</span> <span class="n">streaming</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">split</span><span class="o">=</span><span class="s2">&quot;train&quot;</span><span class="p">)</span>

<span class="c1"># download the first 1 000</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>

<span class="c1"># extract the text</span>
<span class="n">texts</span> <span class="o">=</span> <span class="p">[</span><span class="n">sample</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">dataset</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/home/runner/.local/lib/python3.10/site-packages/datasets/load.py:1429: FutureWarning: The repository for mc4 contains custom code which must be executed to correctly load the dataset. You can inspect the repository content at https://hf.co/datasets/mc4
You can avoid this message in future by passing the argument `trust_remote_code=True`.
Passing `trust_remote_code=True` will be mandatory to load this dataset from the next major release of `datasets`.
  warnings.warn(
</pre></div>
</div>
<script type="application/vnd.jupyter.widget-view+json">{"version_major": 2, "version_minor": 0, "model_id": "e7afd2cc69914b98bca522a165e7fcca"}</script><script type="application/vnd.jupyter.widget-view+json">{"version_major": 2, "version_minor": 0, "model_id": "c9234f8daecf4754b587d943948c1120"}</script></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># let us look at the first part (400 characters) of the first text</span>
<span class="nb">print</span><span class="p">(</span><span class="n">texts</span><span class="p">[</span><span class="mi">0</span><span class="p">][:</span><span class="mi">400</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Posts 4,362	More Info
Okay so to those of you that were very helpful this is not to you but for those of you that laugh when I ask about ohms or powering LSi15&#39;s this is to you. If you know a book, website, or someone to talk to to get more info that I seek so I know what some of you are talking about please share it with me. I ask questions to gain more info on audio thats all. Not to get laughed
</pre></div>
</div>
</div>
</div>
</section>
<section id="filtering">
<h3>Filtering<a class="headerlink" href="#filtering" title="Permalink to this heading">#</a></h3>
<p>To filter texts using <code class="docutils literal notranslate"><span class="pre">textdescriptives</span></code> we need to first set up the pipeline:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">spacy</span>

<span class="c1"># create the spacy nlp pipeline</span>
<span class="n">nlp</span> <span class="o">=</span> <span class="n">spacy</span><span class="o">.</span><span class="n">blank</span><span class="p">(</span><span class="s2">&quot;en&quot;</span><span class="p">)</span>
<span class="c1"># add a component for sentence segmentation</span>
<span class="n">nlp</span><span class="o">.</span><span class="n">add_pipe</span><span class="p">(</span><span class="s2">&quot;sentencizer&quot;</span><span class="p">)</span>
<span class="c1"># add a component for quality filtering</span>
<span class="n">quality_pipe</span> <span class="o">=</span> <span class="n">nlp</span><span class="o">.</span><span class="n">add_pipe</span><span class="p">(</span><span class="s2">&quot;textdescriptives/quality&quot;</span><span class="p">)</span>

<span class="c1"># apply the pipeline to the texts</span>
<span class="n">docs</span> <span class="o">=</span> <span class="n">nlp</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">texts</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>You will note here that docs is a generator. This can be quite useful (especially when streaming texts in one at a time), but for this example we can simply convert it to a list:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;docs is type </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">docs</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">docs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">docs</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;docs is type </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">docs</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>docs is type &lt;class &#39;generator&#39;&gt;
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>docs is type &lt;class &#39;list&#39;&gt;
</pre></div>
</div>
</div>
</div>
<p>Now it is easy to examine the documents using the <code class="docutils literal notranslate"><span class="pre">doc._.quality</span></code> or <code class="docutils literal notranslate"><span class="pre">doc._.passed_quality_check</span></code> extensions:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># examine the first document</span>
<span class="n">doc</span> <span class="o">=</span> <span class="n">docs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">doc</span><span class="p">[:</span><span class="mi">100</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Posts 4,362	More Info
Okay so to those of you that were very helpful this is not to you but for those of you that laugh when I ask about ohms or powering LSi15&#39;s this is to you. If you know a book, website, or someone to talk to to get more info that I seek so I know what some of you are talking about please share it with me. I ask questions to gain more info on audio thats all. Not to get laughed at when asking it.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">doc</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">passed_quality_check</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>False
</pre></div>
</div>
</div>
</div>
<p>It seems like this document did no pass the quality check. Let us examine why that is:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">doc</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">quality</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>QualityOutput(
	passed=False, 
	n_stop_words=ThresholdsOutput(value=435.0, passed=True, threshold=(2.0, None)), 
	alpha_ratio=ThresholdsOutput(value=0.79, passed=True, threshold=(0.7, None)), 
	mean_word_length=ThresholdsOutput(value=3.52, passed=True, threshold=(3.0, 10.0)), 
	doc_length=ThresholdsOutput(value=894.0, passed=True, threshold=(10.0, 100000.0)), 
	symbol_to_word_ratio={&#39;#&#39;: ThresholdsOutput(value=0.0, passed=True, threshold=(None, 0.1))}, 
	proportion_ellipsis=ThresholdsOutput(value=0.0, passed=True, threshold=(None, 0.3)), 
	proportion_bullet_points=ThresholdsOutput(value=0.0, passed=True, threshold=(None, 0.8)), 
	contains={&#39;lorem ipsum&#39;: ThresholdsOutput(value=0.0, passed=True, threshold=False)}, 
	duplicate_line_chr_fraction=ThresholdsOutput(value=0.0, passed=True, threshold=(None, 0.2)), 
	duplicate_paragraph_chr_fraction=ThresholdsOutput(value=0.0, passed=True, threshold=(None, 0.2)), 
	duplicate_ngram_chr_fraction={&#39;5&#39;: ThresholdsOutput(value=0.42, passed=False, threshold=(None, 0.15)), &#39;6&#39;: ThresholdsOutput(value=0.42, passed=False, threshold=(None, 0.14)), &#39;7&#39;: ThresholdsOutput(value=0.38, passed=False, threshold=(None, 0.13)), &#39;8&#39;: ThresholdsOutput(value=0.36, passed=False, threshold=(None, 0.12)), &#39;9&#39;: ThresholdsOutput(value=0.36, passed=False, threshold=(None, 0.11)), &#39;10&#39;: ThresholdsOutput(value=0.36, passed=False, threshold=(None, 0.1))}, 
	top_ngram_chr_fraction={&#39;2&#39;: ThresholdsOutput(value=0.01, passed=True, threshold=(None, 0.2)), &#39;3&#39;: ThresholdsOutput(value=0.01, passed=True, threshold=(None, 0.18)), &#39;4&#39;: ThresholdsOutput(value=0.01, passed=True, threshold=(None, 0.16))}, 
	oov_ratio=ThresholdsOutput(value=None, passed=None, threshold=(None, None)))
</pre></div>
</div>
</div>
</div>
<p>Naturally, you might not know what all of these mean, but you can easily check it on <a class="reference external" href="https://hlasse.github.io/TextDescriptives/quality.html">the documentation site</a>. Examining these we see that this text has a high proportion of characters which appear in duplicate n-grams <code class="docutils literal notranslate"><span class="pre">duplicate_10-gram_chr_fraction</span></code>. When this fraction is really high it means that the text contains a high proportion of repititions. This is often a sign of low quality text.</p>
<p>If we examine the quality thresholds of the pipeline we can see that the max allowed value for <code class="docutils literal notranslate"><span class="pre">duplicate_10-gram_chr_fraction</span></code> is 0.1:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">quality_pipe</span><span class="o">.</span><span class="n">quality_thresholds</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;---&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The thresholds for Duplicate n-grams:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">quality_pipe</span><span class="o">.</span><span class="n">quality_thresholds</span><span class="o">.</span><span class="n">duplicate_ngram_chr_fraction</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>n_stop_words=(2, None) alpha_ratio=(0.7, None) mean_word_length=(3, 10) doc_length=(10, 100000) symbol_to_word_ratio={&#39;#&#39;: (None, 0.1)} proportion_ellipsis=(None, 0.3) proportion_bullet_points=(None, 0.8) contains={&#39;lorem ipsum&#39;: False} duplicate_line_chr_fraction=(None, 0.2) duplicate_paragraph_chr_fraction=(None, 0.2) duplicate_ngram_chr_fraction={&#39;5&#39;: (None, 0.15), &#39;6&#39;: (None, 0.14), &#39;7&#39;: (None, 0.13), &#39;8&#39;: (None, 0.12), &#39;9&#39;: (None, 0.11), &#39;10&#39;: (None, 0.1)} top_ngram_chr_fraction={&#39;2&#39;: (None, 0.2), &#39;3&#39;: (None, 0.18), &#39;4&#39;: (None, 0.16)} oov_ratio=(None, 0.2)
---
The thresholds for Duplicate n-grams:
{&#39;5&#39;: (None, 0.15), &#39;6&#39;: (None, 0.14), &#39;7&#39;: (None, 0.13), &#39;8&#39;: (None, 0.12), &#39;9&#39;: (None, 0.11), &#39;10&#39;: (None, 0.1)}
</pre></div>
</div>
</div>
</div>
</section>
<section id="extracting-high-quality-texts">
<h3>Extracting high quality texts<a class="headerlink" href="#extracting-high-quality-texts" title="Permalink to this heading">#</a></h3>
<p>We are typically interested in text which are not of low quality. We can extract these by filtering out the texts which did not pass the quality check.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">filtered_texts</span> <span class="o">=</span> <span class="p">[</span><span class="n">doc</span> <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">docs</span> <span class="k">if</span> <span class="n">doc</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">passed_quality_check</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span>
    <span class="sa">f</span><span class="s2">&quot;A total of </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">docs</span><span class="p">)</span><span class="si">}</span><span class="s2"> texts were processed and </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">filtered_texts</span><span class="p">)</span><span class="si">}</span><span class="s2"> passed the quality check.&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>A total of 1000 texts were processed and 572 passed the quality check.
</pre></div>
</div>
</div>
</div>
</section>
<section id="changing-the-filters">
<h3>Changing the filters<a class="headerlink" href="#changing-the-filters" title="Permalink to this heading">#</a></h3>
<p>In some cases you might want to apply other filters. For instance the current filter sets a <code class="docutils literal notranslate"><span class="pre">symbol_to_word_ratio</span></code> threshold of 0.1 for hashtags <code class="docutils literal notranslate"><span class="pre">#</span></code>. This means that if a text contains a lot of hashtags it will be filtered out. However if you are working on e.g. tweets this is an unreasonable filter and you might want to adjust that. You can do this by overwriting the quality_thresholds:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">new_thresholds</span> <span class="o">=</span> <span class="n">td</span><span class="o">.</span><span class="n">QualityThresholds</span><span class="p">(</span>
    <span class="n">n_stop_words</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>  <span class="c1"># at least 2 stop words, no upper bound</span>
    <span class="n">alpha_ratio</span><span class="o">=</span><span class="p">(</span><span class="mf">0.7</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
    <span class="n">mean_word_length</span><span class="o">=</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>  <span class="c1"># mean word length between 3 and 10 characters</span>
    <span class="n">doc_length</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">100_000</span><span class="p">),</span>
    <span class="n">symbol_to_word_ratio</span><span class="o">=</span><span class="p">{},</span>  <span class="c1"># don&#39;t filter based on symbol to word ratio.</span>
    <span class="n">proportion_ellipsis</span><span class="o">=</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span>
    <span class="n">proportion_bullet_points</span><span class="o">=</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">),</span>
    <span class="n">contains</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;lorem ipsum&quot;</span><span class="p">:</span> <span class="kc">False</span>
    <span class="p">},</span>  <span class="c1"># remove texts which contain the string &quot;lorem ipsum&quot;</span>
    <span class="n">duplicate_line_chr_fraction</span><span class="o">=</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">),</span>
    <span class="n">duplicate_paragraph_chr_fraction</span><span class="o">=</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">),</span>
    <span class="n">duplicate_ngram_chr_fraction</span><span class="o">=</span><span class="p">{},</span>  <span class="c1"># don&#39;t filter based on duplicate n-grams</span>
    <span class="n">top_ngram_chr_fraction</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;2&quot;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">),</span> <span class="s2">&quot;3&quot;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="mf">0.18</span><span class="p">),</span> <span class="s2">&quot;4&quot;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="mf">0.16</span><span class="p">)},</span>
<span class="p">)</span>

<span class="c1"># overwrite the existing thresholds</span>
<span class="n">quality_pipe</span><span class="o">.</span><span class="n">set_quality_thresholds</span><span class="p">(</span><span class="n">new_thresholds</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>If you want to read more about what each argument does, please check out the <a class="reference external" href="https://hlasse.github.io/TextDescriptives/quality.html#data-classes">documentation</a>.
All the <code class="docutils literal notranslate"><span class="pre">passed</span></code> values and <code class="docutils literal notranslate"><span class="pre">passed_quality_check</span></code> attributes are dynamically updated when you can <code class="docutils literal notranslate"><span class="pre">.set_quality_thresholds</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># check if the new text now pass the quality filter</span>
<span class="n">doc</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">passed_quality_check</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>False
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="comparing-domains">
<h2>Comparing Domains<a class="headerlink" href="#comparing-domains" title="Permalink to this heading">#</a></h2>
<p>These quality metrics are heuristic based and need to be tuned. While the defaults are reasonable for some domains, they may not be for others. We will explore this a bit further in this section. These filters are specifically tuned for the web domain and this can lead to problems when applied directly to other domains.</p>
<section id="data">
<h3>Data<a class="headerlink" href="#data" title="Permalink to this heading">#</a></h3>
<p>For this we will use the <a class="reference external" href="https://sprogteknologi.dk/dataset/danish-gigaword">Danish Gigaword</a> available on <a class="reference internal" href="#DDSC/partial-danish-gigaword-no-twitter"><span class="xref myst">Huggingface Datasets</span></a>. For the purpose of this tutorial we will just use a small test version of it containing around 2500 examples, but you could easily change it to use the whole dataset. Danish Gigaword is a large collection of Danish texts collected from a variety of domains.</p>
<p>We can download the dataset using the following command:</p>
<section id="note-the-dagw-dataset-is-currently-unavailable-due-to-a-copyright-dispute-the-remainder-of-the-tutorial-has-been-disabled-for-now-converted-to-markdown-and-will-be-re-enabled-once-the-dispute-settles">
<h4>NOTE: The DAGW dataset is currently unavailable due to a copyright dispute. The remainder of the tutorial has been disabled for now (converted to markdown), and will be re-enabled once the dispute settles.<a class="headerlink" href="#note-the-dagw-dataset-is-currently-unavailable-due-to-a-copyright-dispute-the-remainder-of-the-tutorial-has-been-disabled-for-now-converted-to-markdown-and-will-be-re-enabled-once-the-dispute-settles" title="Permalink to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">script</span> false --no-raise-error

from datasets import load_dataset

# note that this can take a little while
dataset = load_dataset(&quot;DDSC/partial-danish-gigaword-small-test-sample&quot;)

# All of the dataset is available in the train split
dataset = dataset[&quot;train&quot;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">script</span> false --no-raise-error

# We can take a look at one of the examples:
ten_samples = dataset.select(range(10))
ten_samples.to_pandas()
</pre></div>
</div>
</div>
</div>
<p>As previously mentioned, the Danish Gigaword corpus consist of multiple domains. For this tutorial, we will look at three of these domains. <code class="docutils literal notranslate"><span class="pre">retsinformationdk</span></code> which consists of legal documents, <code class="docutils literal notranslate"><span class="pre">hest</span></code> which contains post from a Danish debate forum (<a class="reference external" href="https://www.heste-nettet.dk/">heste-nettet.dk</a>) and <code class="docutils literal notranslate"><span class="pre">spont</span></code> which contains texts transcribed from spontaneous speech.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">script</span> false --no-raise-error

# we can filter out these three datasets based on the &quot;source&quot;
legal = dataset.filter(lambda x: x[&quot;source&quot;] == &quot;retsinformationdk&quot;, num_proc=1)
news = dataset.filter(lambda x: x[&quot;source&quot;] == &quot;tv2r&quot;, num_proc=1)
speech = dataset.filter(lambda x: x[&quot;source&quot;] == &quot;spont&quot;, num_proc=1)
</pre></div>
</div>
</div>
</div>
<p>We can now examine these datasets a bit more:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">script</span> false --no-raise-error

print(f&quot;Legal contains {len(legal)} examples&quot;)
print(f&quot;News contains {len(news)} examples&quot;)
print(f&quot;Speech contains {len(speech)} examples&quot;)
</pre></div>
</div>
</div>
</div>
<p>We can for example see that the speech dataset contains notably fewer samples than the others.</p>
</section>
</section>
<section id="quality-filtering">
<h3>Quality Filtering<a class="headerlink" href="#quality-filtering" title="Permalink to this heading">#</a></h3>
<p>After we have prepared our datasets we can now start with the quality filtering. Using TextDescriptives, this is extremely simple. We need to do 3 things:</p>
<ol class="arabic simple">
<li><p>Create a pipeline</p></li>
<li><p>Add the quality component to it</p></li>
<li><p>Apply the pipeline to the dataset</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">script</span> false --no-raise-error

# 1. Crease a blank spaCy model with a sentencizer as that&#39;s the only component required for the quality metrics
nlp = spacy.blank(&quot;da&quot;)
nlp.add_pipe(&quot;sentencizer&quot;)
nlp.max_length = (
    2000000  # as some of the documents are quite long we can increase the max length
)
# however it might be worth filtering out these documents beforehand for very very long documents.

# 2. Add the textdescriptives pipeline
quality_pipe = nlp.add_pipe(&quot;textdescriptives/quality&quot;)

# 3. Apply the pipeline to the legal documents
legal_docs = nlp.pipe(legal[&quot;text&quot;])
</pre></div>
</div>
</div>
</div>
<p>If we check now we can see that legal_docs is a generator. This can be a quite efficient format, but for now we just want to process all the text so we simply need to convert it to a list:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">script</span> false --no-raise-error

legal_docs
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">script</span> false --no-raise-error

legal_docs = list(legal_docs)
</pre></div>
</div>
</div>
</div>
<p>We can now inspect the output here:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">script</span> false --no-raise-error

legal_doc = legal_docs[0]

print(legal_doc[:100])  # print the first 100 tokens
print(&quot;----&quot;)
print(&quot;This passed the quality filter:&quot;)
legal_doc._.passed_quality_check
</pre></div>
</div>
</div>
</div>
<p>Here we see that the text did not pass the quality filter. We can now examine why that using the following code:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">script</span> false --no-raise-error

legal_doc._.quality
</pre></div>
</div>
</div>
</div>
<p>Here we see that fraction of characters which is a part of a duplicate 10 gram is &gt;50%. This is a reason why the sample was filtered out. This is not uncommon for legal documents which contain a lot of standard phrases. However you might wish to change the threshold for this filter. We showed you have to do this in the previous section. We also see that the <code class="docutils literal notranslate"><span class="pre">alpha_ratio</span></code> is close 0.8. This means that the text is mostly made up of alphabetic characters. This is good, but as we will see later, this is not common for legal texts.</p>
</section>
<section id="filtering-out-the-text">
<h3>Filtering out the text<a class="headerlink" href="#filtering-out-the-text" title="Permalink to this heading">#</a></h3>
<p>Assuming we don’t want to change the filters we can now use it to filter out the texts that we want to keep:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">script</span> false --no-raise-error

# 4. Filter out the documents that do not pass the quality
legal_docs_filtered = [doc for doc in legal_docs if doc._.passed_quality_check]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">script</span> false --no-raise-error

print(
    f&quot;We had a total of {len(legal[&#39;text&#39;])} which we filtered down to {len(legal_docs_filtered)}.&quot;
)
</pre></div>
</div>
</div>
</div>
<p>That seems like a lot, we should probably check why that is. We can do this by looking at the distribution of the scores of e.g. duplicate 10-gram fraction:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">script</span> false --no-raise-error

import seaborn as sns


def get_duplicate_10_gram_fraction(doc):
    quality = doc._.quality
    duplicate_10_gram_fraction = quality.duplicate_ngram_chr_fraction[&quot;10&quot;]
    return duplicate_10_gram_fraction.value


duplicate_10_gram_fraction = [get_duplicate_10_gram_fraction(doc) for doc in legal_docs]
sns.histplot(duplicate_10_gram_fraction)
</pre></div>
</div>
</div>
</div>
<p>This seems like it explains a lot of the texts which were filtered out, but does not explain everything. Let us take a look at the <code class="docutils literal notranslate"><span class="pre">alpha_ratio</span></code> (the proportion of words which contains at least one alphabetic character) as well:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">script</span> false --no-raise-error

alpha_ratio = [doc._.quality.alpha_ratio.value for doc in legal_docs]
sns.histplot(alpha_ratio)
</pre></div>
</div>
</div>
</div>
<p>We see that most of the text do not pass the <code class="docutils literal notranslate"><span class="pre">alpha_ratio</span></code> threshold of 0.7 or higher. This is not uncommon for legal documents as e.g. the paragraph sign <code class="docutils literal notranslate"><span class="pre">§</span></code> is not an alphabetic character. It might be relevant to change the threshold to 0.7 or lower.</p>
</section>
<section id="comparing-across-domains">
<h3>Comparing across domains<a class="headerlink" href="#comparing-across-domains" title="Permalink to this heading">#</a></h3>
<p>We see that legal documents have quite a few perculiarities let us examine how the <code class="docutils literal notranslate"><span class="pre">alpha_ratio</span></code> behaves across different domains:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">script</span> false --no-raise-error

# first we apply the pipeline to the other domains
news_docs = nlp.pipe(news[&quot;text&quot;])
news_docs = list(news_docs)
speech_docs = nlp.pipe(speech[&quot;text&quot;])
speech_docs = list(speech_docs)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">script</span> false --no-raise-error

# extract alpha ratio:
news_alpha_ratio = [doc._.quality.alpha_ratio.value for doc in news_docs]
speech_alpha_ratio = [doc._.quality.alpha_ratio.value for doc in speech_docs]
</pre></div>
</div>
</div>
</div>
<p>Now that we have the metrics we can plot a histogram comparing the metrics:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">script</span> false --no-raise-error

import matplotlib.pyplot as plt

# histogram
sns.histplot(news_alpha_ratio, label=&quot;News&quot;, alpha=0.5, binwidth=0.05)
sns.histplot(alpha_ratio, label=&quot;Legal&quot;, alpha=0.5, binwidth=0.05)
sns.histplot(speech_alpha_ratio, label=&quot;Speech&quot;, alpha=0.5, binwidth=0.05)

# add labels
plt.xlabel(&quot;Alpha ratio&quot;)
plt.ylabel(&quot;Count&quot;)
plt.legend()
</pre></div>
</div>
</div>
</div>
<p>Here we see a couple of things:</p>
<ul class="simple">
<li><p>A fair amount of legal documents have an alpha ratio above 0.6.</p></li>
<li><p>Almost no news text have a alpha ratio below 0.6.</p></li>
<li><p>The alpha ratio for the Speech corpus is suspicously low</p></li>
</ul>
<p>Let us examine one of the speech samples a bit more in-depth:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">script</span> false --no-raise-error

doc = speech_docs[0]
# examine the first 100 tokens in the first document
print(doc[:100])
</pre></div>
</div>
</div>
</div>
<p>From this we can see that a high proportion of the tokens in the speech dataset dentoes the speaker such and tokens such as <code class="docutils literal notranslate"><span class="pre">:</span></code> then lower the alpa ratio. This might or might not be problematic for the task at hand.</p>
<p><strong>Therefore it is important to note that while these filters are useful for filtering large amount of texts it is also important to know that they should be adjusted to the target domain.</strong></p>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="sklearn_integration.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Scikit-learn Integration</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="introductory_tutorial.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Introductory Tutorial</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Filtering corpora using Quality</a><ul>
<li><a class="reference internal" href="#setup">Setup</a></li>
<li><a class="reference internal" href="#filtering-web-content">Filtering Web content</a><ul>
<li><a class="reference internal" href="#the-data">The Data</a></li>
<li><a class="reference internal" href="#filtering">Filtering</a></li>
<li><a class="reference internal" href="#extracting-high-quality-texts">Extracting high quality texts</a></li>
<li><a class="reference internal" href="#changing-the-filters">Changing the filters</a></li>
</ul>
</li>
<li><a class="reference internal" href="#comparing-domains">Comparing Domains</a><ul>
<li><a class="reference internal" href="#data">Data</a><ul>
<li><a class="reference internal" href="#note-the-dagw-dataset-is-currently-unavailable-due-to-a-copyright-dispute-the-remainder-of-the-tutorial-has-been-disabled-for-now-converted-to-markdown-and-will-be-re-enabled-once-the-dispute-settles">NOTE: The DAGW dataset is currently unavailable due to a copyright dispute. The remainder of the tutorial has been disabled for now (converted to markdown), and will be re-enabled once the dispute settles.</a></li>
</ul>
</li>
<li><a class="reference internal" href="#quality-filtering">Quality Filtering</a></li>
<li><a class="reference internal" href="#filtering-out-the-text">Filtering out the text</a></li>
<li><a class="reference internal" href="#comparing-across-domains">Comparing across domains</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script type="application/vnd.jupyter.widget-state+json">{"state": {"37f08ba01e1b45c2b3399c5c73319fde": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "d83913d692b04e2ab5a2728621b5f043": {"model_name": "ProgressStyleModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "bar_color": null, "description_width": ""}}, "7c18ac42a2eb4249a7be11ed2a2422b9": {"model_name": "FloatProgressModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "ProgressView", "bar_style": "success", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_37f08ba01e1b45c2b3399c5c73319fde", "max": 9509.0, "min": 0.0, "orientation": "horizontal", "style": "IPY_MODEL_d83913d692b04e2ab5a2728621b5f043", "tabbable": null, "tooltip": null, "value": 9509.0}}, "1e66682dcb5b4b68992b1aebdc40440d": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "a51f7dc400fa485787fb5cb734b35f49": {"model_name": "HTMLStyleModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "7272a892c0624990bbe4acd73ca935d5": {"model_name": "HTMLModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_1e66682dcb5b4b68992b1aebdc40440d", "placeholder": "\u200b", "style": "IPY_MODEL_a51f7dc400fa485787fb5cb734b35f49", "tabbable": null, "tooltip": null, "value": "Downloading builder script: 100%"}}, "33f6f6f5e79447c39a63a34bf30fc00f": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "122f2e595a6b41a19f0d854c75a00325": {"model_name": "HTMLStyleModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "9271820104ab4ef484a7b4f0974c0195": {"model_name": "HTMLModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_33f6f6f5e79447c39a63a34bf30fc00f", "placeholder": "\u200b", "style": "IPY_MODEL_122f2e595a6b41a19f0d854c75a00325", "tabbable": null, "tooltip": null, "value": " 9.51k/9.51k [00:00&lt;00:00, 1.00MB/s]"}}, "11640408f46d4e008e953af0f6360d7e": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "e7afd2cc69914b98bca522a165e7fcca": {"model_name": "HBoxModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_7272a892c0624990bbe4acd73ca935d5", "IPY_MODEL_7c18ac42a2eb4249a7be11ed2a2422b9", "IPY_MODEL_9271820104ab4ef484a7b4f0974c0195"], "layout": "IPY_MODEL_11640408f46d4e008e953af0f6360d7e", "tabbable": null, "tooltip": null}}, "69cbe21f8bae4a6bbd5333a49d81b6a6": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "24ac7df93e21463582d22181d3bbaa15": {"model_name": "ProgressStyleModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "bar_color": null, "description_width": ""}}, "961e3f7b3fcb4cc8a90a68f9b4286194": {"model_name": "FloatProgressModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "ProgressView", "bar_style": "success", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_69cbe21f8bae4a6bbd5333a49d81b6a6", "max": 15587.0, "min": 0.0, "orientation": "horizontal", "style": "IPY_MODEL_24ac7df93e21463582d22181d3bbaa15", "tabbable": null, "tooltip": null, "value": 15587.0}}, "775eed6823b547d498a2aee23e49a325": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "e056897e95c1461084e19c2e348dca0f": {"model_name": "HTMLStyleModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "f580d92128d14048aaeae0a8f99e5822": {"model_name": "HTMLModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_775eed6823b547d498a2aee23e49a325", "placeholder": "\u200b", "style": "IPY_MODEL_e056897e95c1461084e19c2e348dca0f", "tabbable": null, "tooltip": null, "value": "Downloading readme: 100%"}}, "64b6c82cb38a43be847717523cb6df08": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "b3cf2cd8466b4e0b8e190a7c171c75b7": {"model_name": "HTMLStyleModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "070e0d8112684fbc96ded2744969617e": {"model_name": "HTMLModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_64b6c82cb38a43be847717523cb6df08", "placeholder": "\u200b", "style": "IPY_MODEL_b3cf2cd8466b4e0b8e190a7c171c75b7", "tabbable": null, "tooltip": null, "value": " 15.6k/15.6k [00:00&lt;00:00, 1.93MB/s]"}}, "dc64f4b00ed747d08069c73ac309e8de": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "c9234f8daecf4754b587d943948c1120": {"model_name": "HBoxModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_f580d92128d14048aaeae0a8f99e5822", "IPY_MODEL_961e3f7b3fcb4cc8a90a68f9b4286194", "IPY_MODEL_070e0d8112684fbc96ded2744969617e"], "layout": "IPY_MODEL_dc64f4b00ed747d08069c73ac309e8de", "tabbable": null, "tooltip": null}}}, "version_major": 2, "version_minor": 0}</script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script crossorigin="anonymous" data-jupyter-widgets-cdn="https://cdn.jsdelivr.net/npm/" src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@1.0.6/dist/embed-amd.js"></script>
    </body>
</html>